"use strict";function init(){$(".registration").on("click",registerForm),$(".login").on("click",loginForm),$(".logout").on("click",logOut),$("body").on("submit","form",submittedForm),getToken()?loggedInState():loggedOutState()}function registerForm(e){e.preventDefault(),$(".main").show().html('\n    <h4>Registration form</h4>\n    <div class="row">\n      <form  method="post" action="/register" class="col s12">\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="user_name" type="text" class="validate" name="user[username]">\n          <label for="user_name">Username (we recommend not to use your real name)</label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="email" type="email" class="validate" name="user[email]">\n          <label for="email">Email</label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="password" type="password" class="validate" name="user[password]">\n          <label for="password">Password</label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="password-confirm" type="password" class="validate" name="user[passwordConfirmation]">\n          <label for="password-confirm">Confirm password</label>\n          </div>\n        </div>\n        <button class="btn waves-effect waves-light" type="submit" name="action">Register</button>\n      </form>\n    </div>')}function loginForm(e){e&&e.preventDefault(),$(".main").show().html('\n    <h4>Log in</h4>\n    <div class="row">\n      <form method="post" action="/login" class="col s12">\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="email" type="email" class="validate" name="email">\n          <label for="email">Email</label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="input-field col s12">\n          <input id="password" type="password" class="validate" name="password">\n          <label for="password">Password</label>\n          </div>\n        </div>\n        <button class="btn waves-effect waves-light" type="submit" name="action">Log in</button>\n      </form>\n    </div>')}function submittedForm(e){e&&e.preventDefault(),$.ajax({url:""+apiUrl+$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),beforeSend:setRequestHeader}).done(function(e){e.token&&setToken(e.token),loggedInState()}),$(".main").hide()}function setToken(e){return window.localStorage.setItem("token",e)}function setRequestHeader(e){return e.setRequestHeader("Authorization","Bearer "+getToken())}function getToken(){return window.localStorage.getItem("token")}function removeToken(){return window.localStorage.clear()}function loggedInState(){$(".loggedIn").show(),$(".loggedOut").hide()}function loggedOutState(){$(".loggedIn").hide(),$(".loggedOut").show()}function logOut(e){e.preventDefault(),loggedOutState(),loginForm(),removeToken()}var apiUrl="http://localhost:3000/api";$(init);